# HSX Project Milestones

---

## Milestone 1 - HSX VM Functional
**Date:** 2025-10-04
**Status:** Completed

### Description
Initial end-to-end toolchain from C source -> LLVM IR -> HSX assembly -> HSX executable (.hxe) -> VM execution is working. Sample programs compile and run inside the Python VM.

### Achievements
- Implemented the LLVM -> HSX pipeline via `python/hsx-llc.py`, `python/asm.py`, and `python/hld.py`.
- Defined the `.hxe` container (HSXE magic, version 0x0001, CRC32) and linker packaging flow.
- `platforms/python/host_vm.py` executes generated bytecode, handles SVC EXIT, and reports program status.
- Added Codex integration guidance to help future contributors extend the stack consistently.

### Next Step
Move into Milestone 2 (Toolchain Foundation). Add regression tests under `python/tests/` and document SVC APIs.

---

## Milestone 2 - Toolchain Foundation
**Status:** Completed

### Description
Expanded the Python toolchain so the HSX build pipeline is reliable and well-tested across representative IR patterns.

### Highlights
- Extended `python/hsx-llc.py`, `python/asm.py`, and `python/hld.py` with MOV/phi/call lowering, `.hxo` packaging, linker integration, and assembler quality-of-life switches.
- Added mirrored C samples and pytest coverage for mov/icmp/call/half flows, plus CLI smoke tests for the C->HSX pipeline.
- Instrumented `platforms/python/host_vm.py` with CLI flags (`--entry-symbol`, `--max-steps`, `--trace-file`) and dev-libm hooks.
- Consolidated documentation under `docs/` with the refactor roadmap, Doxygen scaffolding, and Make-based workflows for examples/tests.

### Next Step
Use the strengthened toolchain as the base for the multi-task executive and orchestration stack (Milestone 3).

---

## Milestone 3 - Multi-tasking Executive
**Status:** Completed

### Description
Built a Python executive that can schedule multiple HSX tasks, expose an RPC protocol, and provide operator tooling across the VM stack.

### Highlights
- Added register/stack base-pointer contexts, state snapshot/restore, and cycle accounting to `platforms/python/host_vm.py`.
- Introduced the scheduler service (`python/executive.py`) and managed daemon (`python/execd.py`) that drive the VM via RPC.
- Delivered the TCP shell client (`python/shell_client.py`) with `ps`, `exec`, `kill`, attach/detach, and health commands.
- Shipped supporting operator tools (`python/blinkenlights.py`, `python/exec_smoke.py`) and documented the JSON message protocol.

### Next Step
Wire in inter-task communication and stdio routing via the mailbox subsystem (Milestone 4).

---

## Milestone 4 - Mailbox & STDIO Integration *(Planned)*
Create a mailbox subsystem and stdio abstraction so HSX applications can exchange messages and stream output through the executive.

### Objectives
- Implement mailbox SVCs (0x05) with wait/wake semantics, bounded queues, and scheduler hooks.
- Provide an HSX stdio library that maps stdout/stderr onto mailboxes and routes stdin injection through mailbox events.
- Extend shell tooling with `listen` (optional PID filter, default broadcast) and `send` commands for interacting with task I/O.
- Ship sample HSX applications demonstrating mailbox-based communication, stdio logging, and shell-driven interaction.

---

## Milestone 5 - Value/Command System *(Planned)*
Introduce the Value/Command SVC modules (0x07/0x08) on top of the mailbox/stdio infrastructure.

### Objectives
- Persisted value table (with optional FRAM backing) and command dispatcher accessible through shell tooling.
- Integrate value/command flows with mailbox/stdio for monitoring and operator feedback.
- Provide HSX and Python examples manipulating the value table and invoking commands end-to-end.

---

## Milestone 6 - HAL Integration *(Planned)*
Unify device-level I/O through the HAL.

### Components
- GPIO, ADC, PWM, I2C, and SPI abstractions.
- Syscall enumeration and capability discovery inside the VM.
- Event-driven I/O simulation support.

---

## Milestone 7 - Hardware Deployment / FRAM + NOR *(Planned)*
Port the HSX Executive to AVR128DA28 and manage hybrid flash/FRAM memory.

### Tasks
- NOR cache manager for program pages, FRAM for task data.
- Cooperative scheduler on target hardware.
- Validate CAN + UART shell on real hardware.

---

## Milestone 8 - Debugger & Tooling *(Planned)*
Develop interactive debugging support and richer developer ergonomics across the HSX toolchain.

### Objectives
- Design breakpoint and single-step support for the Python VM and future hardware targets.
- Extend assembler/VM metadata to surface source locations and symbol tables.
- Integrate trace/inspection commands into shell tooling and document the workflow.

---

## Repository Snapshot
To be updated alongside the next packaged release.
