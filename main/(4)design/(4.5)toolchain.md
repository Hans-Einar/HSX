# Design Spec — Toolchain & Artefacts

## Scope
- LLVM lowering (hsx-llc.py) and register allocation.
- Assembler/linker (asm.py, hld.py) and object formats (HXO/HXE).
- Debug metadata generation (listings, symbol sidecars).
- Packaging/build scripts.

## Data Structures
- Intermediate representations (register pools, spill slots).
- Object file sections, relocation entries, symbol tables.
- HXE header fields and CRC handling.

## Algorithms / Behaviour
- IR to MVASM lowering sequences (ints, floats, branches, SVC).
- Register allocation & spilling strategy.
- Linking flow (resolve, relocate, write HXE, generate manifest).
- Debug metadata emission for values/commands/symbols.

## Edge Cases
- Unsupported LLVM IR constructs (diagnostics, fallbacks).
- Relocation overflow/section size limits.
- Toolchain compatibility between Python prototype and future native tools.

## Testing Considerations
- Unit tests for lowering patterns and assembler directives.
- Integration tests building sample apps end-to-end (C → HXE → VM).
- Validation of CRC/header integrity and symbol metadata.
