# Design Spec â€” Provisioning & Persistence

## Scope
- Node startup sequence, image loading, task lifecycle.
- CAN and SD provisioning protocols.
- FRAM persistence flow for calibration/state.

## Data Structures
- Manifest formats (CAN/SD) referencing group:value IDs and HXE assets.
- FRAM key allocation tables.
- Provisioning session state (progress, error handling).

## Algorithms / Behaviour
- Boot-time provisioning: detect sources, validate CRC, load tasks.
- Runtime update process (reload image, preserve persistent values).
- FRAM load/save triggered by val.persist modes.

## Edge Cases
- Partial downloads or CRC failure recovery.
- Version mismatches between app and host firmware.
- Power loss during persistence update.

## Testing Considerations
- Simulated CAN/SD provisioning scenarios.
- Persistence regression tests (power cycle simulations).
- Integration tests covering calibration updates and rollback.
