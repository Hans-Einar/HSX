# Toolkit Design â€” HSX Shell & Debugger

> Detailed design for host tooling built atop the HSX executive.

## 1. Shell
- **Purpose:** Provide manual control, scripting, and diagnostics via CLI commands.
- **Command set:** Attach/detach, clock control, register/stack/memory inspection, mailbox operations, exec management.
- **Enhancements:** `ps <pid>` filtering, JSON output mode, integration with upcoming debugger session management.
- **Extensibility:** Modular command handlers to share logic with debugger core; ability to delegate advanced workflows to debugger.

## 2. Debugger
- **Architecture:** Shared core library (`hsxdbg`) offering session management, event handling, breakpoint/watch services.
- **Interfaces:** CLI (`hsx dbg` with `prompt_toolkit`), TUI (`textual`), scripting API for automation.
- **Features:** Breakpoints, run-to-PC, watch lists, call stack/memory views, event-driven UI updates.
- **Portability:** Python implementation only; optional on-target shim or HSX task to forward events via serial/UART when running against embedded hosts.

## 3. Packaging & Distribution
- **Dev environment:** `make dev-env` sets up virtual environment with shell/debugger dependencies.
- **Release artifacts:** Document packaging/release process (`make package/release`), including optional distribution of toolkit-only bundles.
- **Documentation:** Update CLI help topics, tutorials, and architecture docs to reflect tooling features.

## 4. Testing & Validation
- **Unit tests:** Cover command parsing, event handling, state caching.
- **Integration tests:** Exercise attach-run-detach workflows, mailbox samples, debugger scenarios.
- **Manual validation:** Cross-platform (Windows PowerShell, macOS Terminal, Linux terminals/tmux).

## 5. Dependencies
- Relies on system design for session/event APIs, breakpoint management, and symbol metadata.
- Coordinates with milestone plan to ensure tooling work begins only after core refactors ready.
